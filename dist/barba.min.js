!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("Barba",[],e):"object"==typeof exports?exports.Barba=e():t.Barba=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=10)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={getCurrentUrl:function(){return window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search},cleanLink:function(t){return t.replace(/#.*/,"")},requestTimeout:5e3,request:function(t){var e=this.deferred(),n=window.setTimeout(function(){e.reject(new Error("timeout!"))},this.requestTimeout),r=new Headers;return r.append("x-barba","yes"),fetch(t,{method:"GET",headers:r,cache:"default"}).then(function(t){if(window.clearTimeout(n),t.status>=200&&t.status<300)return e.resolve(t.text());var r=new Error(t.statusText||t.status);return e.reject(r)}).catch(function(t){window.clearTimeout(n),e.reject(t)}),e.promise},deferred:function(){return new function(){var t=this;this.resolve=null,this.reject=null,this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}},getPort:function(t){var e="undefined"!=typeof t?t:window.location.port,n=window.location.protocol;return""!=e?parseInt(e):"http:"===n?80:"https:"===n?443:void 0}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={events:{},on:function(t,e){this.events[t]=this.events[t]||[],this.events[t].push(e)},once:function(t,e){function n(){r.off(t,n),e.apply(this,arguments)}var r=this;this.on(t,n)},off:function(t,e){t in this.events!=!1&&this.events[t].splice(this.events[t].indexOf(e),1)},trigger:function(t){for(var e=this,n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];t in this.events!=!1&&this.events[t].forEach(function(t){t.apply(e,r)})}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={data:{},set:function(t,e){this.data[t]=e},get:function(t){return this.data[t]},reset:function(){this.data={}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={history:[],add:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.history.push({url:t,namespace:e})},currentStatus:function(){return this.history[this.history.length-1]},prevStatus:function(){var t=this.history;return t.length<2?null:t[t.length-2]}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(1),s=r(a),u=n(9),c=r(u),f=n(2),l=r(f),d=n(3),h=r(d),p=n(8),v=r(p);e.default={Dom:v.default,History:h.default,Cache:l.default,cacheEnabled:!0,transitionProgress:!1,ignoreClassLink:"no-barba",start:function(){this.init()},init:function(){var t=this.Dom.getContainer(),e=this.Dom.getWrapper();e.setAttribute("aria-live","polite"),this.History.add(this.getCurrentUrl(),this.Dom.getNamespace(t)),s.default.trigger("initStateChange",this.History.currentStatus()),s.default.trigger("newPageReady",this.History.currentStatus(),{},t,this.Dom.currentHTML),s.default.trigger("transitionCompleted",this.History.currentStatus()),this.bindEvents()},bindEvents:function(){this.onLinkClick=this.onLinkClick.bind(this),this.onStateChange=this.onStateChange.bind(this),document.addEventListener("click",this.onLinkClick),window.addEventListener("popstate",this.onStateChange)},getCurrentUrl:function(){return o.default.cleanLink(o.default.getCurrentUrl())},goTo:function(t){window.history.pushState(null,null,t),this.onStateChange()},forceGoTo:function(t){window.location=t},load:function(t){var e=this,n=o.default.deferred(),r=this.Cache.get(t);return r||(r=o.default.request(t),this.Cache.set(t,r)),r.then(function(t){var r=e.Dom.parseResponse(t);e.Dom.putContainer(r),e.cacheEnabled||e.Cache.reset(),n.resolve(r)}).catch(function(r){e.forceGoTo(t),n.reject()}),n.promise},getHref:function(t){if(t)return t.getAttribute&&"string"==typeof t.getAttribute("xlink:href")?t.getAttribute("xlink:href"):"string"==typeof t.href?t.href:void 0},onLinkClick:function(t){for(var e=t.target;e&&!this.getHref(e);)e=e.parentNode;if(this.preventCheck(t,e)){t.stopPropagation(),t.preventDefault(),s.default.trigger("linkClicked",e,t);var n=this.getHref(e);this.goTo(n)}},preventCheck:function(t,e){if(!window.history.pushState)return!1;var n=this.getHref(e);return!(!e||!n)&&(!(t.which>1||t.metaKey||t.ctrlKey||t.shiftKey||t.altKey)&&((!e.target||"_blank"!==e.target)&&(window.location.protocol===e.protocol&&window.location.hostname===e.hostname&&(o.default.getPort()===o.default.getPort(e.port)&&(!(n.indexOf("#")>-1)&&((!e.getAttribute||"string"!=typeof e.getAttribute("download"))&&(o.default.cleanLink(n)!=o.default.cleanLink(location.href)&&!e.classList.contains(this.ignoreClassLink))))))))},getTransition:function(){return c.default},onStateChange:function(){var t=this.getCurrentUrl();if(this.transitionProgress&&this.forceGoTo(t),this.History.currentStatus().url===t)return!1;this.History.add(t);var e=this.load(t),n=new(this.getTransition());this.transitionProgress=!0,s.default.trigger("initStateChange",this.History.currentStatus(),this.History.prevStatus());var r=n.init(this.Dom.getContainer(),e);e.then(this.onNewContainerLoaded.bind(this)),r.then(this.onTransitionEnd.bind(this))},onNewContainerLoaded:function(t){var e=this.History.currentStatus();e.namespace=this.Dom.getNamespace(t),s.default.trigger("newPageReady",this.History.currentStatus(),this.History.prevStatus(),t,this.Dom.currentHTML)},onTransitionEnd:function(){this.transitionProgress=!1,s.default.trigger("transitionCompleted",this.History.currentStatus(),this.History.prevStatus())}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(0),s=r(a),u=function(){function t(){i(this,t),this.oldContainer=void 0,this.newContainer=void 0,this.newContainerLoading=void 0}return o(t,[{key:"init",value:function(t,e){var n=this;return this.oldContainer=t,this._newContainerPromise=e,this.deferred=s.default.deferred(),this.newContainerReady=s.default.deferred(),this.newContainerLoading=this.newContainerReady.promise,this.start(),this._newContainerPromise.then(function(t){n.newContainer=t,n.newContainerReady.resolve()}),this.deferred.promise}},{key:"done",value:function(){this.oldContainer.parentNode.removeChild(this.oldContainer),this.newContainer.style.visibility="visible",this.deferred.resolve()}},{key:"start",value:function(){}}]),t}();e.default=u},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var i=n(0),o=r(i),a=n(4),s=r(a);e.default={ignoreClassLink:"no-barba-prefetch",init:function(){return!!window.history.pushState&&(this.onLinkEnter=this.onLinkEnter.bind(this),document.body.addEventListener("mouseover",this.onLinkEnter),void document.body.addEventListener("touchstart",this.onLinkEnter))},onLinkEnter:function(t){for(var e=t.target;e&&!s.default.getHref(e);)e=e.parentNode;if(e&&!e.classList.contains(this.ignoreClassLink)){var n=s.default.getHref(e);if(s.default.preventCheck(t,e)&&!s.default.Cache.get(n)){var r=o.default.request(n);s.default.Cache.set(n,r)}}}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=n(1),s=r(a),u=function(){function t(){i(this,t),this.namespace=null}return o(t,[{key:"init",value:function(){var t=this;s.default.on("initStateChange",function(e,n){n&&n.namespace===t.namespace&&t.onLeave()}),s.default.on("newPageReady",function(e,n,r){t.container=r,e.namespace===t.namespace&&t.onEnter()}),s.default.on("transitionCompleted",function(e,n){e.namespace===t.namespace&&t.onEnterCompleted(),n&&n.namespace===t.namespace&&t.onLeaveCompleted()})}},{key:"onEnter",value:function(){}},{key:"onEnterCompleted",value:function(){}},{key:"onLeave",value:function(){}},{key:"onLeaveCompleted",value:function(){}}]),t}();e.default=u},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={dataNamespace:"namespace",wrapperId:"barba-wrapper",containerClass:"barba-container",currentHTML:document.documentElement.innerHTML,parseResponse:function(t){this.currentHTML=t;var e=document.createElement("div");e.innerHTML=t;var n=e.querySelector("title");return n&&(document.title=n.textContent),this.getContainer(e)},getWrapper:function(){var t=document.getElementById(this.wrapperId);if(!t)throw new Error("Barba.js: wrapper not found!");return t},getContainer:function(t){if(t||(t=document.body),!t)throw new Error("Barba.js: DOM not ready!");var e=this.parseContainer(t);if(!e)throw new Error("Barba.js: no container found");return e},getNamespace:function(t){return t?t.getAttribute("data-"+this.dataNamespace):null},putContainer:function(t){t.style.visibility="hidden";var e=this.getWrapper();e.appendChild(t)},parseContainer:function(t){return t.querySelector("."+this.containerClass)}}},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=n(5),c=r(u),f=function(t){function e(){return i(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"start",value:function(){this.newContainerLoading.then(this.finish.bind(this))}},{key:"finish",value:function(){window.scrollTo(0,0),this.done()}}]),e}(c.default);e.default=f},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var i=n(5),o=r(i),a=n(7),s=r(a),u=n(2),c=r(u),f=n(1),l=r(f),d=n(3),h=r(d),p=n(4),v=r(p),y=n(6),g=r(y),w=n(0),b=r(w);t.exports={version:"2.0.0",BaseTransition:o.default,BaseView:s.default,Cache:c.default,Dispatcher:l.default,HistoryManager:h.default,Pjax:v.default,Prefetch:g.default,Utils:b.default}}])});