---
# Front matter comment to ensure Jekyll properly reads file.
---

{% include header.html %}
{% include nav.html %}

<div id="barba-wrapper">
  <div class="barba-container">
    <h1>How it works</h1>
    <p>barba.js uses PJAX (aka push state ajax) to enhance the user's experience.</p>
    <p>This technique consist of preventing the normal link behavior, changing the browser url manually, and manually injecting the new content in the page. In this way there will be no browser "hard refresh".</p>

    <p>Here is a walkthrough of what happens when the user clicks a link:</p>
    <ol>
      <li>Check if the link is valid and eligible for PJAX. If yes, prevent the normal browser behavior.</li>
      <li>Change the URL using the <a href="https://developer.mozilla.org/en-US/docs/Web/API/History/pushState" target="_blank">push state API.</a></li>
      <li>Start fetching the new page via a XMLHttpRequest.</li>
      <li>Create a <b>new</b> <a href="transition.html">transition</a> instance.</li>
      <li>As soon the new page is loaded, barba.js parses the new HTML (taking <code>.barba-container</code>) and puts the new content on the DOM inside <code>#barba-wrapper</code>.</li>
      <li>The <a href="transition.html">transition</a> instance will take care of hiding the old container and showing the new one.</li>
      <li>As soon the transition is finished, the old container is removed from the DOM.</li>
    </ol>

    <blockquote>
      <p>Please note: on the server side your pages will need to be served normally. Barba.js works as ehnancement for your website, everything should work normally without Javascript.</p>
    </blockquote>

    <h2>Why?</h2>
    <p>Using this technique will bring numerous benefits:</p>
    <ul>
      <li>Possibility to create nice transition between pages enhancing the user's experience.</li>
      <li>Reduce HTTP requests. (why reload the css/js at each page change?)</li>
      <li>Possibility to speed up the navigation using <a href="prefetch.html">prefetch</a> and <a href="cache.html">cache</a>.</li>
    </ul>
  </div>
</div>

{% include footer.html %}
